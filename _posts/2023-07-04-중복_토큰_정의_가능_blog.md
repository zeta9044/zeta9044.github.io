---
layout: post
title: "중복 토큰 정의 가능"
date: 2023-07-04
tags: [중복, 가능, 토큰, 정의]
categories: blog
---

## 사용자 입력:
> javaCC에서 토큰명만 다른 중복토큰을 정의할 수 있나?

## ChatGPT 응답:
> JavaCC는 토큰명이 다른 중복 토큰을 정의할 수 있습니다. JavaCC는 컴파일러 생성 도구로, 문법을 기반으로 파서를 생성하는 데 사용됩니다. JavaCC를 사용하여 문법을 정의하고, 토큰을 선언하고, 토큰간의 우선순위를 정의할 수 있습니다.

중복 토큰을 정의하는 경우, 토큰 이름이 다른 경우에만 중복으로 인식됩니다. 다른 속성(예: 정규 표현식)을 가진 경우에는 중복으로 처리되지 않습니다. 예를 들어, 다음과 같이 두 개의 중복 토큰을 정의할 수 있습니다:

```java
TOKEN : { < IDENTIFIER: < LETTER > (< LETTER | DIGIT >)* >
          | < INT_LITERAL: < DIGIT >+ >
          }
```

위의 예제에서 `IDENTIFIER`와 `INT_LITERAL`은 서로 다른 토큰 이름을 가지고 있으며, 각각 문자와 숫자로 구성된 식별자와 정수 리터럴을 나타냅니다. 이러한 토큰들은 문법 규칙에서 사용될 수 있습니다.

중복 토큰을 사용할 때에는 토큰 우선순위를 명시적으로 지정해야 할 수도 있습니다. JavaCC에서는 우선순위를 지정하기 위해 `|` 연산자를 사용합니다. 이를 통해 동일한 입력 문자열에 대해 여러 토큰 중 가장 긴 토큰을 선택할 수 있습니다.

예를 들어, 다음과 같이 `if`와 `identifier`를 중복 토큰으로 정의하고 우선순위를 지정할 수 있습니다:

```java
TOKEN : { < IF: "if" >
          | < IDENTIFIER: < LETTER > (< LETTER | DIGIT >)* >
          }

void ifStatement() :
{}
{
  ( < IF > )? < IDENTIFIER >
}
```

위의 예제에서 `ifStatement` 규칙은 `IF` 토큰 또는 `IDENTIFIER` 토큰으로 시작하는 규칙을 정의하고 있습니다. 이러한 경우, 입력이 "if"로 시작하는 경우 `IF` 토큰이 선택되고, 그 외의 경우에는 `IDENTIFIER` 토큰이 선택됩니다.

따라서, JavaCC를 사용하여 토큰명만 다른 중복 토큰을 정의하고 사용할 수 있습니다.

## 사용자 입력:
> |   <SPECIAL_CLOSE: "?>" >
|   <SLASH_CLOSE: "/>" >
|   <SLASH: "/" >
|   <EQUALS: "=" >
|   <STRING: "\"" (~["<"])* "\"" | "\'" (~["<"])* "\'" >
|   <Name: (["a"-"z", "A"-"Z"]) (["a"-"z", "A"-"Z", "-", "_", ".", "0"-"9", "\u00B7", "\u0300"-"\u036F", "\u203F"-"\u2040"])* >

    // mode PROC_INSTR
|   <PI: "?>" >
|   <IGNORE: ~[] >   여기 토큰 정의에서SPECIAL_CLOSE와  PI가 중복인데, 이렇게 써도 되나?

## ChatGPT 응답:
> JavaCC에서는 토큰명이 다른 중복 토큰을 정의할 수 있습니다. 그러나 주의해야 할 점은 토큰 정의 순서가 중요하다는 점입니다. 위의 토큰 정의에서 `SPECIAL_CLOSE`와 `PI`는 중복으로 정의되어 있습니다.

JavaCC는 토큰 정의를 위에서 아래로 순차적으로 처리합니다. 따라서 먼저 정의된 토큰이 우선적으로 선택됩니다. 즉, `SPECIAL_CLOSE` 토큰과 `PI` 토큰이 동일한 입력에 대해 겹치는 부분을 가지고 있다면, `SPECIAL_CLOSE`가 먼저 선택됩니다.

따라서 `SPECIAL_CLOSE`와 `PI`가 중복 정의되어 있는 경우, `SPECIAL_CLOSE`가 먼저 일치하는 토큰으로 선택되므로 `PI` 토큰은 일치하지 않을 것입니다.

만약 `PI` 토큰을 우선적으로 선택하고 싶다면, 토큰 정의의 순서를 변경하여 `PI` 토큰을 먼저 정의해야 합니다. 예를 들어 다음과 같이 수정할 수 있습니다:

```java
|   <PI: "?>" >
|   <SPECIAL_CLOSE: "?>" >
```

이렇게 하면 `PI` 토큰이 `SPECIAL_CLOSE`보다 먼저 정의되었으므로, 동일한 입력에 대해 `PI` 토큰이 먼저 선택됩니다.

따라서, 토큰 정의 순서에 주의하면 `SPECIAL_CLOSE`와 `PI`와 같이 중복된 토큰을 정의할 수 있습니다.

## 사용자 입력:
> 그러면, javacc에서 문법오류는 아니란 건가?

## ChatGPT 응답:
> JavaCC에서 토큰 정의에서 중복된 토큰을 사용하는 것은 문법적으로는 오류가 아닙니다. JavaCC는 문법을 기반으로 파서를 생성하는 도구로서, 중복된 토큰을 허용하고 처리할 수 있도록 설계되었습니다.

중복된 토큰을 사용하는 경우, 토큰 정의의 순서에 따라 우선순위가 결정됩니다. 토큰 정의의 상단에 있는 토큰이 우선적으로 선택되는 것이 기본 동작입니다. 이는 중복된 토큰 중 어떤 것이 선택될지 예측 가능한 결과를 얻을 수 있도록 합니다.

따라서, JavaCC에서 중복된 토큰을 사용하는 것은 문법적으로는 허용되는 것이지만, 토큰 정의의 순서와 우선순위를 고려하여 의도한 동작을 얻을 수 있도록 해야 합니다. 이를 위해서는 토큰 정의의 순서를 조정하거나 우선순위를 명시적으로 지정하는 등의 작업이 필요할 수 있습니다.

따라서, 중복된 토큰을 사용하더라도 JavaCC에서는 문법 오류로 간주되지 않지만, 올바른 동작을 위해 주의가 필요합니다.

