---
layout: post
title: "유지된 임시 테이블 이유"
tags: [유지, 임시, 이유, 테이블]
---

## 사용자 입력:
> 오라클에서 CREATE GLOBAL TEMPORARY TABLE ais0038_296_test ON
COMMIT PRESERVE ROWS AS
SELECT
    /* ibm.datastage-temp-create.xml */
    *
FROM
    ais0038 s 이렇게 테이블을 만들고, 연결끊고 다시 들어왔는데 테이블이 그대로 남아있는 이유는?

## ChatGPT 응답:
> 오라클에서 CREATE GLOBAL TEMPORARY TABLE 문을 사용하여 임시 테이블을 만들 때, 옵션으로 "ON COMMIT PRESERVE ROWS"를 지정하면, 커밋 시에 테이블의 데이터가 유지됩니다. 이는 임시 테이블에 삽입된 데이터가 커밋 이후에도 남아있도록 하는 옵션입니다.

임시 테이블은 현재 세션에 대해서만 유효하며, 세션이 끝나면 자동으로 삭제됩니다. 그러나 "ON COMMIT PRESERVE ROWS" 옵션이 지정되면, 세션 종료 후에도 테이블의 데이터가 유지되어 다음 세션에서도 사용할 수 있습니다.

따라서, 연결을 끊고 다시 들어와도 테이블이 그대로 남아있는 것은 "ON COMMIT PRESERVE ROWS" 옵션이 지정되어서 커밋 이후에도 테이블의 데이터가 유지되기 때문입니다.

## 사용자 입력:
> 다른 세션에서도 볼 수 있는거지?

## ChatGPT 응답:
> 아니요, CREATE GLOBAL TEMPORARY TABLE 문으로 생성된 임시 테이블은 해당 세션에만 유효합니다. 다른 세션에서는 해당 임시 테이블을 볼 수 없습니다.

임시 테이블은 현재 세션에 대해서만 유효하며, 세션이 끝나면 자동으로 삭제됩니다. 다른 세션에서는 동일한 임시 테이블 이름을 사용하여도 별개의 테이블이 생성되며, 각 세션에서 자신의 임시 테이블을 독립적으로 사용할 수 있습니다.

따라서, 다른 세션에서는 해당 임시 테이블을 볼 수 없으며, 그 세션의 임시 테이블만 접근할 수 있습니다.

## 사용자 입력:
> dbeaver툴에서 CREATE GLOBAL TEMPORARY TABLE 문으로 생성된 임시 테이블을 만들고, 연결 종료후, 들어왔는데도 임시테이블이 여전히 존재하는 이유는?

## ChatGPT 응답:
> dbeaver 툴은 일반적으로 데이터베이스 관리 및 쿼리 실행을 위한 클라이언트 도구입니다. 임시 테이블은 해당 세션에만 유효하고 세션 종료 시 자동으로 삭제되지만, dbeaver 툴은 기본적으로 세션을 유지하는 경우가 있습니다.

dbeaver 툴에서 임시 테이블을 생성한 후 연결을 종료하고 다시 접속하면, 이전 세션의 임시 테이블이 여전히 존재할 수 있습니다. 이는 dbeaver 툴이 기본적으로 세션을 유지하여 임시 테이블을 계속 사용할 수 있도록 설계되어 있기 때문입니다.

세션을 종료하고 다시 접속했을 때 임시 테이블이 여전히 존재하는 것은 dbeaver 툴의 동작 방식에 따른 것이며, 데이터베이스 서버의 동작 방식과는 관련이 없습니다. 다른 클라이언트 도구를 사용하거나 세션을 완전히 종료하고 다시 접속하면 임시 테이블은 사라지게 될 것입니다.

## 사용자 입력:
> 이상한게  postgresql은 그렇게 하면 테이블이 사라지는데..

## ChatGPT 응답:
> 죄송합니다. 이해에 혼동이 있었습니다. 제가 이전 답변에서 잘못된 정보를 제공했습니다.

실제로 PostgreSQL에서도 CREATE TEMPORARY TABLE 문으로 생성된 임시 테이블은 세션 종료 시 자동으로 삭제됩니다. 따라서, dbeaver 툴에서 임시 테이블을 생성하고 연결을 종료한 후 다시 접속하면, 임시 테이블은 사라지게 됩니다.

저의 이전 답변이 잘못된 정보를 제공한 것에 대해 사과드리며, 올바른 정보를 제공하기 위해 조치를 취하도록 하겠습니다. 감사합니다.

## 사용자 입력:
> 오라클에서 임시테이블이 세션종료후에도 존재하는 이유는?

## ChatGPT 응답:
> 오라클에서 임시 테이블이 세션 종료 후에도 존재하는 이유는 오라클의 임시 테이블 동작 방식과 관련이 있습니다.

오라클에서 임시 테이블은 영구 테이블과 달리 특별한 유형의 세션 전용 테이블입니다. 이러한 임시 테이블은 세션에 로그인하는 동안에만 유효하며, 세션 종료 시 자동으로 삭제됩니다.

그러나 오라클은 일반적으로 세션을 재사용하는 방식으로 동작합니다. 세션이 종료되더라도 실제로는 해당 세션에 할당된 리소스를 정리하고 풀에 반환합니다. 그리고 다음에 같은 사용자가 다시 로그인할 때, 이전 세션에서 사용한 임시 테이블을 재사용합니다.

이러한 동작 방식 때문에, 세션을 종료하고 다시 접속하면 이전 세션에서 생성한 임시 테이블이 여전히 존재할 수 있습니다. 이는 이전 세션과 동일한 사용자로 새로운 세션이 재사용되었기 때문입니다.

따라서, 오라클에서 임시 테이블이 세션 종료 후에도 존재하는 이유는 세션 재사용 및 리소스 관리 방식과 관련이 있습니다.

