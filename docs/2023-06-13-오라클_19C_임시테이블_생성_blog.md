---
layout: post
title: "오라클 19C 임시테이블 생성"
date: 2023-06-13
tags: [생, 임시, 오라클, 테이블]
categories: blog
---

## 사용자 입력:
> 오라클 19C에서 임시테이블 생성하는 문법 알려줘.

## ChatGPT 응답:
> 오라클 19c에서 임시 테이블을 생성하는 문법은 다음과 같습니다:

```sql
CREATE GLOBAL TEMPORARY TABLE 테이블명 (
    컬럼명1 데이터타입,
    컬럼명2 데이터타입,
    ...
) ON COMMIT [PRESERVE ROWS | DELETE ROWS];
```

위 문법에서 `테이블명`은 생성할 임시 테이블의 이름을 나타내며, `컬럼명`은 테이블에 포함될 컬럼 이름과 데이터 타입을 정의합니다.

`ON COMMIT` 구문은 임시 테이블의 커밋 동작을 설정합니다. 다음 두 가지 옵션을 선택할 수 있습니다:

- `PRESERVE ROWS`: 커밋 후에도 임시 테이블의 데이터가 유지됩니다.
- `DELETE ROWS`: 커밋 시 임시 테이블의 데이터가 자동으로 삭제됩니다.

이러한 방식으로 임시 테이블을 생성하고 원하는 데이터를 임시로 저장하거나 작업에 활용할 수 있습니다.

## 사용자 입력:
> GLOBAL을 꼭 붙여야 하나?

## ChatGPT 응답:
> 아니요, GLOBAL 키워드는 옵션이며 선택적으로 사용할 수 있습니다. GLOBAL 키워드를 사용하면 임시 테이블이 세션을 범위로 하는 전역 임시 테이블이 됩니다. 이는 여러 세션에서 임시 테이블을 공유할 수 있게 합니다.

만약 GLOBAL 키워드를 사용하지 않으면, 임시 테이블은 세션 범위로만 존재하는 로컬 임시 테이블이 됩니다. 로컬 임시 테이블은 세션에 속한 사용자만 접근할 수 있습니다.

따라서 GLOBAL 키워드를 사용하면 임시 테이블을 다른 세션에서 공유할 수 있으며, GLOBAL 키워드를 사용하지 않으면 임시 테이블은 해당 세션 내에서만 사용할 수 있습니다. 사용하는 상황에 맞게 GLOBAL 또는 로컬 임시 테이블을 선택하면 됩니다.

## 사용자 입력:
> 서로 다른 세션에서는 못보게 해야되는데, 그러면 GLOBAL을 빼면 되나?

## ChatGPT 응답:
> 네, 맞습니다. 다른 세션에서 임시 테이블을 보지 못하게 하려면 GLOBAL 키워드를 사용하지 않고 로컬 임시 테이블을 생성하면 됩니다. 

로컬 임시 테이블은 해당 세션에만 존재하며, 다른 세션에서는 접근할 수 없습니다. 따라서 다른 세션과 데이터를 공유하고 싶지 않을 때는 GLOBAL 키워드를 생략하여 로컬 임시 테이블을 생성하면 됩니다.

예를 들어, 다음과 같이 로컬 임시 테이블을 생성할 수 있습니다:

```sql
CREATE [PRIVATE | LOCAL] TEMPORARY TABLE 테이블명 (
    컬럼명1 데이터타입,
    컬럼명2 데이터타입,
    ...
) ON COMMIT [PRESERVE ROWS | DELETE ROWS];
```

위 문법에서 `[PRIVATE | LOCAL]`은 로컬 임시 테이블을 생성하기 위한 옵션입니다. PRIVATE 또는 LOCAL 키워드 중 하나를 선택하여 사용하면 됩니다. 이를 통해 다른 세션에서 해당 임시 테이블에 접근할 수 없도록 할 수 있습니다.

## 사용자 입력:
> private ,local  둘중에 하나는 꼭 붙여야 하나?

## ChatGPT 응답:
> 아니요, PRIVATE 또는 LOCAL 키워드는 선택적으로 사용할 수 있습니다. 이 키워드를 사용하지 않아도 로컬 임시 테이블이 생성됩니다. PRIVATE 또는 LOCAL 키워드를 명시적으로 지정하지 않으면 기본적으로 로컬 임시 테이블이 생성됩니다.

따라서 다음과 같이 키워드 없이 로컬 임시 테이블을 생성할 수 있습니다:

```sql
CREATE TEMPORARY TABLE 테이블명 (
    컬럼명1 데이터타입,
    컬럼명2 데이터타입,
    ...
) ON COMMIT [PRESERVE ROWS | DELETE ROWS];
```

위 문법에서 TEMPORARY TABLE 다음에 키워드를 사용하지 않으면 로컬 임시 테이블이 생성됩니다. 다른 세션에서 이 임시 테이블에 접근할 수 없으며, 세션 내에서만 사용 가능합니다.

따라서 PRIVATE 또는 LOCAL 키워드를 사용할 필요가 없을 경우, 그냥 로컬 임시 테이블을 생성하는 문법을 사용하시면 됩니다.

## 사용자 입력:
> ON COMMIT [PRESERVE ROWS | DELETE ROWS]; 이걸 꼭 붙여서 생성해야 하나?

## ChatGPT 응답:
> 아니요, ON COMMIT 구문은 선택적으로 사용할 수 있습니다. 이 구문을 사용하여 임시 테이블이 커밋되었을 때의 동작을 지정할 수 있습니다.

기본적으로 ON COMMIT 구문을 명시하지 않으면 임시 테이블은 세션의 끝까지 데이터를 유지하며, 커밋 시에도 데이터가 유지됩니다. 즉, 기본 동작은 "PRESERVE ROWS"와 동일합니다.

그러나 ON COMMIT 구문을 명시적으로 지정하여 동작을 변경할 수 있습니다. 다음 두 가지 옵션 중 하나를 선택할 수 있습니다:

- `PRESERVE ROWS`: 커밋 후에도 임시 테이블의 데이터가 유지됩니다.
- `DELETE ROWS`: 커밋 시 임시 테이블의 데이터가 자동으로 삭제됩니다.

따라서 ON COMMIT 구문을 생략하고 기본 동작을 사용하거나, PRESERVE ROWS 또는 DELETE ROWS 중 하나를 선택하여 원하는 동작을 명시할 수 있습니다.

